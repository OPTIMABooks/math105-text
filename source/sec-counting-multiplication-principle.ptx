<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-set-multiplication-principle" xmlns:xi="http://www.w3.org/2001/XInclude">
	<title>The Multiplication Principle</title>

	<objectives>
		<ul>
			<li>
				<p>
					Apply the addition rule to counting problems.
				</p>
			</li>
			<li>
				<p>
					Apply the multiplication principle to counting problems.
				</p>
			</li>
		</ul>
	</objectives>

	<introduction>
		<p>
			In the previous section, we explored the art of counting by examining the number of elements in finite sets. Building on that foundation, particularly the inclusion-exclusion principle, we now introduce our first result: the addition rule. Following our discussion on the addition rule, we will further expand our counting techniques by introducing and applying another foundational tool, the multiplication principle.
		</p>
	</introduction>
	<subsection>
		<title>The Addition Rule</title>
		<p>
			The <term>addition rule</term> is a reformulation of the <xref text="custom" ref="fact-sets-inclusion-exclusion-rule"> Inclusion-Exclusion Rule</xref> for <xref text="custom" ref="def_mutually-exclusive"> mutually exclusive</xref> sets.
		</p>
		<principle xml:id="thm_counting-rule_addition-informal">
			<title>Addition Rule</title>
			<statement>
				<p>
					The <term>addition rule</term> states that if a process can occur in one of two distinct ways, where the first way has <m>n</m> possibilities and the second way has <m>m</m> possibilities, then the entire process can occur in <m>n+m</m> ways.
				</p>
			</statement>
		</principle>
		<p>
			Note that the addition rule can be extended to include processes or tasks that require <m>k</m> steps. In that case, if there are <m>n_1</m> ways to complete the first step, <m>n_2</m> ways to complete the second, and so forth, then there are 
			<me>
				n_1 + n_2 + \cdots + n_k
			</me>
			total ways to complete the task. 
			To see this common-sense counting rule in action, consider the following example.
		</p>
		<example xml:id="ex_counting_addition-informal">
			<title>Using the Addition Rule</title>
			<statement>
				<p>You have won a church raffle. The winning ticket entitles you to choose either one of eight possible home-made pies, or one of six types of home-made cakes. In how many ways can you make your choice?</p>
			</statement>
			<solution>
				<p>
					Since you may choose either a pie <em>or</em> a cake, and none of your choices are <em>both</em> a pie and a cake, according to the addition rule you have <m>8+6=14</m> choices.
				</p>
			</solution>
		</example>
		<p>
			The addition rule is useful for counting mutually exclusive cases. For non-mutually exclusive scenarios, use <xref text="custom" ref="fact-sets-inclusion-exclusion-rule"> Inclusion-Exclusion Rule</xref>.
		</p>
	</subsection>
	<subsection xml:id="sec_counting_multiplication">
		<title>The Multiplication Rule</title>
		<p>
			Some processes have two or more steps, rather than cases, each of which can happen in several different ways. To determine the total number of ways a multi-step process can occur, we use a new rule called the <term>multiplication rule</term>.
		</p>
		<principle xml:id="thm_counting-rule_multiplication">
			<idx>multiplication rule (counting)</idx>
			<idx><h>counting rules</h><h>multiplication</h></idx>
			<statement>
				<p>
					The <term>multiplication rule</term> states that if a task consists of two steps where step one can happen in <m>n_1</m> ways and step two can happen in <m>n_2</m> ways, then the entire task can be done in <m>n_1 \times n_2</m> different ways.
				</p>
			</statement>
		</principle>
		<p>
			<alert>Note:</alert> The multiplication rule can be expanded to processes that include <m>k</m> stages, the <m>i^\text{th}</m> of which can happen in <m>n_i</m> ways, then the total number of ways the task can be done is:
			<me>
				n_1 \times n_2 \times \cdots \times n_k
			</me>.
		</p>
		<example xml:id="ex_counting_multiplication_2-step">
			<statement>
				<p>
					A college student has two pairs of clean pants and three clean shirts. How many outfits are possible, where an <q>outfit</q> is a pair of pants and a shirt?
				</p>
			</statement>
			<solution>
				<p>
					Picking an outfit requires two steps:
					<ol>
						<li><p>Choosing a pair of pants from 2 choices,</p></li>
						<li><p>Choosing a shirt from 3 choices.</p></li>
					</ol>
					Thus, by the multiplication rule the total number of outfits is:
					<me>2 \times 3 = 6</me>.
				</p>
			</solution>
		</example>
		<example xml:id="ex_counting_multiplication_3-step">
			<statement>
				<p>
					At a lunch buffet, you can choose from 4 types of sandwiches, 5 types of drinks, and 3 types of desserts. How many different meal combinations can you create by selecting one item from each category?
				</p>
			</statement>
			<solution>
				<p> 
					Selecting a meal requires three steps::
					<ol>
						<li><p>Choosing a sandwich from 4 options,</p></li>
						<li><p>Choosing a drink from 5 options,</p></li>
						<li><p>Choosing a dessert from 3 options.</p></li>
					</ol>
					The total number of lunch combinations is thus:
					<me>4\times 5\times 3 = 60</me>.
				</p>
			</solution>
		</example>
		<p>
			Both examples above can be represented using a <term>tree diagram</term>. Tree diagrams are helpful tools for visualizing the multiplication rule and solving multi-step problems. They work well when each step in a process leads to a set of possible outcomes. However, when a process involves many steps or numerous options at each stage, tree diagrams can become cumbersome to create and use.
		</p>
		<definition xml:id="def_tree-diagram">
			<idx>tree diagram</idx>
			<statement>
				<p>
					In a <term>tree diagram</term>, each step in a process is represented by a branching point, with each branch showing a possible outcome of that step.
				</p>
			</statement>
		</definition>
		<example>
			<statement>
				<p>
					Construct a tree diagram to illustrate the solution to <xref ref="ex_counting_multiplication_2-step"/>.
				</p>
			</statement>
			<solution>
				<p>
					Note that the tree has 6 <em>leaves</em> <mdash></mdash> the number of outfits (outcomes) predicted by the multiplication rule.
				</p>
				<figure xml:id="fig_counting_multiplication_2-step">
					<caption>Tree diagram illustrating the 6 outcomes possible in <xref ref="ex_counting_multiplication_2-step"/>..</caption>
					<image xml:id="tikz-ex-counting-tree-2-step" width="55%">
						<shortdescription>A tree diagram with one branch from the starting point for each of of two pairs of pants, and three branches from each pair or pants, one for each clean shirt (1 through 3).</shortdescription>
						<latex-image>
							% Tree options
							% Set the overall layout of the tree
							\tikzstyle{level 1}=[level distance=2cm, sibling distance=3cm]
							\tikzstyle{level 2}=[level distance=2.5cm, sibling distance=1cm]
							\tikzstyle{end} = [circle, minimum width=1pt, fill, inner sep=0pt]
							% Define styles for bags and leaves
							\tikzstyle{drawer} = [text width=4em, text centered]

							\begin{tikzpicture}[grow=right, sloped, scale=1.0,font=\sffamily]
								\node[drawer] {outfits}
									child {
										node[drawer] {pants 2}
											child { node[end, label=right:{shirt 3}] {} }
											child { node[end, label=right:{shirt 2}] {} }
											child { node[end, label=right:{shirt 1}] {} }
									}
									child {
										node[drawer] {pants 1}
											child { node[end, label=right:{shirt 3}] {} }
											child { node[end, label=right:{shirt 2}] {} }
											child { node[end, label=right:{shirt 1}] {} }
									};
							\end{tikzpicture}
						</latex-image>
					</image>
				</figure>
			</solution>
		</example>
		<p>
			The next example demonstrates that while a tree diagram faithfully represents a counting problem that uses the multiplication principle, it can be very large and unwieldy to use!
		</p>
		<example>
			<statement>
				<p>
					Construct a tree diagram to illustrate the solution to <xref ref="ex_counting_multiplication_3-step"/>.
				</p>
			</statement>
			<solution>
				<p>
					Sixty branches makes this tree inconvenient to use, though it does visually represent all possible lunch options. For problems with many levels or options, the multiplication rule is a more efficient way to solve counting problems.
				</p>
				<figure xml:id="fig_counting_multiplication_3-step">
					<caption>Tree diagram showing all 60 outcomes possible in <xref ref="ex_counting_multiplication_3-step"/>.</caption>
					<!-- For unknown reasons, the tikz code for this image won't create an SVG file in Pretext (the file is blank). To update this diagram, edit /assets/images/sets_and_prob/tikz-source/tree-3-step-code_v1.tex (or v2) and turn the resulting PDF into a PNG file. -->
					<image xml:id="tikz-ex-counting-tree-3-step" width="85%" source="images/sets_and_prob/tree-3-step-code_v1.png">
						<shortdescription>A tree diagram with one branch from the starting point for each of four sandwich options, and five branches from each sandwich option representing drinks, and three from each drink representing drink choices. This leads to 60 total options, which agrees with the multiplication rule.</shortdescription>
					</image>
				</figure>
			</solution>
		</example>
		<p>
			Notice that in a tree diagram we represent a particular sequence of choices by following a path through the tree. For example, in the second tree diagram, going along the second branch to sandwich 2, then the first branch to drink 1, and then the third branch to dessert 3 gives us one complete lunch option. The total number of possible lunches is the same as the total number of branches at the last step.
		</p>
		<p>
			There are some instances where the number of choices we have at a given step depends on the choice we made at the previous step. In these cases, the multiplication rule will not work. However, as shown in the next example, a tree diagram can still be a useful tool for counting the total number of ways to complete such a process.
		</p>
		<example xml:id="ex_counting_multiplication_unbalanced-tree">
			<statement>
				<p>
					A travel agency offers a vacation package where you select one destination and one resort. You can choose from three destinations: Hawaii, Florida, and Alaska. In Hawaii, you can stay at one of two resorts. In Florida, you can choose from three different resorts. In Alaska, only one resort is available. How many different vacation packages are possible in total?
				</p>
			</statement>
			<solution>
				<sidebyside widths="50% 40%" margins="3% 4% 3%">
					<p>This process can be broken up into two steps:
						<ol>
							<li><p>pick a destination (there are three of them);</p></li>
							<li><p>pick a resort (the number depends on the destination chosen in step 1).</p></li>
						</ol>
					</p>
					<figure xml:id="fig_counting_multiplication_ex_unbalanced-tree">
						<caption>Vacations.</caption>
						<image xml:id="image_counting_multiplication_ex_unbalanced-tree">
							<shortdescription> A tree with one branch from the starting point for each destination, Hawaii, Florida, and Alaska.  Hawaii has two branches for its two resorts, Florida has three branches for its three resorts, and Alaska has one branch.</shortdescription>
							<latex-image>
								\begin{tikzpicture}[font=\sffamily\tiny]
									\node (r) at (0,0)       {};
									\node (0) at (1,1.5)     [below right]{Hawaii};
											\node (00) at (3,1.7)   {resort 1};
											\node (01) at (3,1.0)   {resort 2};
									\node (1) at (1,0)       [right]{Florida};
											\node (10) at (3,0.4)   {resort 1};
											\node (11) at (3,0)     {resort 2};
											\node (12) at (3,-0.4)  {resort 3};
									\node (2) at (1,-1.5)    [above right]{Alaska};
											\node (20) at (3,-1.3) {resort 1};
									\draw[line width=0.15mm]
										(r.east) to (0.west)
											(0) to (00)
											(0) to (01)
										(r.east) to (1.west)
											(1) to (10)
												(1) to (11)
												(1) to (12)
										(r.east) to (2.west)
											(2) to (20);
								\end{tikzpicture}
							</latex-image>
						</image>
					</figure>
				</sidebyside>
				<p>
					Since the number of options in Step 2 depends on the choice made in Step 1, we cannot apply the multiplication rule directly. Instead, we use a tree diagram, as shown above. This diagram illustrates how the number of available choices varies based on the selected destination. 
					Notice that there are six branches at the final level of the tree, indicating six distinct vacation package combinations. The tree diagram effectively captures the conditional nature of the choices and helps visualize all possible outcomes.
				</p>
			</solution>
		</example>
	</subsection>

</section>