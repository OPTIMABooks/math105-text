<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-statistics-data-representation" xmlns:xi="http://www.w3.org/2001/XInclude">
	<title>Representing Data Graphically</title>

	<objectives>
			<ul>
			<li>
				<p>
					Define and identify categorical and quantitative data
				</p>
			</li>
			<li>
				<p>
					Read and construct frequency tables and relative frequency tables
				</p>
			</li>
			<li>
				<p>
					Make bar charts and pie charts for categorical variables
				</p>
			</li>
			<li>
				<p>
					Make histograms for quantitative variables 
				</p>
			</li>
			<li>
				<p>
					Construct Steam-and-Leaf plots.
				</p>
			</li>
		</ul>
	</objectives>
	<subsection xml:id="sec_data_data">
		<title>What is Data?</title>

		<introduction xml:id="sec_data_variables_intro">
			<p>
				Once we have collected data from an observational study or an experiment, we need to summarize and present it in a way that will be meaningful to our audience. Raw <term>data</term> is not very useful by itself. In this section we will begin with graphical presentations of data and in the rest of the chapter we will learn about numerical summaries of data.
			</p>
			<definition xml:id="def_data">
				<idx>data</idx>
				<statement>
					<p>
						Any collection of measurements or values is referred to collectively as <term>data</term>.
					</p>
				</statement>
			</definition>
			<p>
				We can understand and classify data better if we first understand the source from which the measurements are taken. Each type of measurement such as height, length of time, or favorite pizza topping, comes from a certain characteristic or property called a <term>variable</term>.
			</p>
			<definition xml:id="def_variable">
				<idx>variable</idx>
				<statement>
					<p>
						A <term>variable</term> is a single characteristic that is being measured or changed.
					</p>
				</statement>
			</definition>
			<p>
				In a typical set of data, one or more variables are identified, and the measurements are collected for each of those variables.
			</p>
			<example xml:id="ex_data_identifying-variables">
				<!-- <title>Identifying Variables</title> -->
				<statement>
					<p>
						A wildlife conservationist wishes to better understand the population of fish that live in a certain lake. To do this, she catches 100 fish and records the species, length, and weight of each fish. What are the variables in this set of data?
					</p>
				</statement>
				<solution>
					<p>
						The three characteristics measured are: fish species, fish length, and fish weight. These are the variables.
					</p>
				</solution>
			</example>
		</introduction>
		<subsubsection xml:id="subsubsec_data_variables_number">
			<title>Classification by Number of Variables</title>
			<p>
				One way in which we can classify data is based on the number of variables that are being measured. In this chapter we may look at data sets composed of	measurements from one, two, or more variables. These are given the following names.
			</p>
			<definition xml:id="def_num-vars">
				<idx><h>data</h><h>univariate</h></idx>
				<idx><h>data</h><h>bivariate</h></idx>
				<idx><h>data</h><h>multivariate</h></idx>
				<statement>
					<p>
						A data set can be named based on the number of variables being measured as follows.
						<ul>
							<li>
								<p>
									<term>Univariate data</term> contains measurements from a single variable.
								</p>
							</li>
							<li>
								<p>
									<term>Bivariate data</term> contains measurements from two variables. This is sometimes called <term>paired data</term>
								</p>
							</li>
							<li>
								<p>
									<term>Multivariate data</term> contains measurements from three or more variables.
								</p>
							</li>
						</ul>
					</p>
				</statement>
			</definition>
			<p>
				Let's look at an example.
			</p>
			<example xml:id="ex_data_classifying-datasets">
				<!-- <title>Classifying Datasets</title> -->
				<statement>
					<p>
						Identify each of the following data sets based on the number of variables being measured.
						<ol marker="a.">
							<li>
								<p>
									A wildlife conservationist records the species, length, and weight of 100 fish caught in a certain lake.
								</p>
							</li>
							<li>
								<p>
									To better understand how tall tomato plants grow, you record the height of 40 tomato plants at a local nursery.
								</p>
							</li>
							<li>
								<p>
									The mayor wants to know if the local bond measure will pass in the next election. He asks 250 city residents how old they are, and if they plan to support the measure.
								</p>
							</li>
							<li>
								<p>
									As a part of the admission process, a school requires students to submit their name, phone number, zip code, email address, and expected major.
								</p>
							</li>
						</ol>
					</p>
				</statement>
				<solution>
					<p>
						<ol marker="a.">
							<li>
								<p>
									Multivariate. There are three variables: species, length, and weight.
								</p>
							</li>
							<li>
								<p>
									Univariate. Since there is only one variable, height, this is univariate data.
								</p>
							</li>
							<li>
								<p>
									Bivariate. Collecting age and support for the bond means that there are two variables.
								</p>
							</li>
							<li>
								<p>
									Multivariate. There are five variables in this data set, so it must be multivariate.
								</p>
							</li>
						</ol>
					</p>
				</solution>
			</example>
		</subsubsection>
		<subsubsection xml:id="sec_data_variables_type">
			<title>Types of Variable</title>
			<p>
				Another way to classify data is based on the types of variables that are being measured. The type of a variable depends on what is being recorded. Consider the following example.
			</p>
			<example xml:id="ex_data_classify-variables">
				<title>Classifying Variables</title>
				<statement>
					<p> 
						The post office, wishing to better understand its customers, decides to collect	data from 1000 households in eastern Washington. They mail each household a questionnaire asking the residents to confirm their zip code, list the number of people who live in that household, and give the length of time that they have lived there. What are the variables in this study, and how do the measurements differ?
					</p>
				</statement>
				<solution>
					<p>
						The three variables in this multivariate set of data are: zip code, number of residents, and length of time in residence. The characteristics of these variables are:
						<ul>
							<li>
								<title>Zip Code</title>
								<p>
									While the values recorded are numbers (i.e. 99324, 49103, 92357, etc) they
									actually represent categories and not numerical values. Notice that it would 
									make no sense to <q>average</q> or add together two zip codes!
								</p>
							</li>
							<li>
								<title>Number of Residents</title>
								<p>
									These values are numbers (i.e. 2 residents, 5 residents, 1 resident, etc) and they do actually represent numerical quantities. Notice that it does make sense to talk about the <q>average number of residents</q> or to perform mathematical operations on these values. Also, note that the values that this variable can take on are all whole numbers.
								</p>
							</li>
							<li>
								<title>Length of Residence</title>
								<p>
									The values for this final variable are also numbers (i.e. 1 year, 2 months, and 12 days = 1.2 years). It also makes sense to perform mathematical operation on these values. In contracts to the <q>number or residence</q> data, these values can be decimals or fractions.
								</p>
							</li>
						</ul>
					</p>
				</solution>
			</example>
			<p>
				The example above illustrates the two main types of variables we will study. One example of the first type is <q>zip code</q>, a variable that yields non-numerical data. The values of such a variable represent categories into which individuals can be grouped, or <q>qualities</q> that the data possess. Such variables are called <term>qualitative</term>.
			</p>
			<definition xml:id="def_qualitative-variable">
				<idx>qualitative variable</idx>
				<idx><h>variable</h><h>qualitative</h></idx>
				<statement>
					<p>
						A <term>qualitative variable</term> (also called a <term>categorical variable</term>) is one that takes on values representing categories or descriptions as opposed to numerical values.
					</p>
				</statement>
			</definition>
			<p>
				The second type of variable<mdash/>and the one we will focus on most in this chapter<mdash/>includes variables whose values are numerical and can be used in mathematical operations such as addition and division. These values represent a <q>quantity</q> rather than a <q>quality</q>, and are therefore called <term>quantitative</term> variables. Examples of this type from our earlier example include <q>number of residents</q> and <q>length of residence</q>.
			</p>
			<definition xml:id="def_quantitative-variable">
				<idx>quantitative variable</idx>
				<idx><h>variable</h><h>quantitative</h></idx>
				<statement>
					<p>
						A <term>quantitative variable</term> is one that takes on numerical values. Unlike a qualitative variable, the values of a quantitative variable can be used in computations.
					</p>
				</statement>
			</definition>
		</subsubsection>
	</subsection>
	<subsection xml:id="sec_statistics_graphs_qualitative">
		<title>Graphing Qualitative Data</title>
		<introduction>
			<p>
				Data, no matter the type, is not very informative in its raw form. A graph is a powerful way to summarize and display data. However, before a graph can be produced the data needs to be summarized in a table. For qualitative data this summary is called a frequency table.
			</p>
			<p>
				The following example motivates the need to organize data before it can be understood and will be used throughout this section.
			</p>
			<example xml:id="ex_graphs_organizing-data">
				<!-- <title>Organizing Data</title> -->
				<statement>
					<p>
						To better understand their customers, a pizza parlor decides to collect a list of favorite pizza toppings. They choose an appropriate sampling technique and gather the following data from 96 customers. What does this data tell you?
					</p>
					<table xml:id="ex_graphs_organizing-data_table">
						<title>Raw Pizza Topping Data</title>
						<tabular>
							<row>
								<cell>cheese</cell>
								<cell>green peppers</cell>
								<cell>olives</cell>
								<cell>cheese</cell>
							</row>
							<row>
								<cell>olives</cell>
								<cell>cheese</cell>
								<cell>cheese</cell>
								<cell>cheese</cell>
							</row>
							<row>								
								<cell>green peppers</cell>
								<cell>cheese</cell>
								<cell>pepperoni</cell>
								<cell>olives</cell>
							</row>
							<row>
								<cell>pineapple</cell>
								<cell>onions</cell>
								<cell>cheese</cell>
								<cell>sausage</cell>
							</row>
							<row>								
								<cell>onions</cell>
								<cell>anchovies</cell>
								<cell>olives</cell>
								<cell>cheese</cell>
							</row>
							<row>								
								<cell>green peppers</cell>
								<cell>cheese</cell>
								<cell>cheese</cell>
								<cell>cheese</cell>
							</row>
							<row>
								<cell>pineapple</cell>
								<cell>mushrooms</cell>
								<cell>green peppers</cell>
								<cell>pineapple</cell>
							</row>
							<row>								
								<cell>cheese</cell>
								<cell>green peppers</cell>
								<cell>sausage</cell>
								<cell>cheese</cell>
							</row>
							<row>
								<cell>sausage</cell>
								<cell>bacon</cell>
								<cell>bacon</cell>
								<cell>green peppers</cell>
							</row>
							<row>
								<cell>cheese</cell>
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
								<cell>olives</cell>
							</row>
							<row>								
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
								<cell>green peppers</cell>
								<cell>pepperoni</cell>
							</row>
							<row>								
								<cell>olives</cell>
								<cell>olives</cell>
								<cell>olives</cell>
								<cell>green peppers</cell>
							</row>
							<row>
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
								<cell>mushrooms</cell>
								<cell>onions</cell>
							</row>
							<row>								
								<cell>bacon</cell>
								<cell>sausage</cell>
								<cell>sausage</cell>
								<cell>olives</cell>
							</row>
							<row>
								<cell>sausage</cell>
								<cell>green peppers</cell>
								<cell>olives</cell>
								<cell>bacon</cell>
							</row>
							<row>
								<cell>sausage</cell>
								<cell>pepperoni</cell>
								<cell>pineapple</cell>
								<cell>olives</cell>
							</row>
							<row>								
								<cell>mushrooms</cell>
								<cell>bacon</cell>
								<cell>onions</cell>
								<cell>bacon</cell>
							</row>
							<row>								
								<cell>olives</cell>
								<cell>sausage</cell>
								<cell>mushrooms</cell>
								<cell>cheese</cell>
							</row>
							<row>
								<cell>pineapple</cell>
								<cell>bacon</cell>
								<cell>green peppers</cell>
								<cell>pepperoni</cell>
							</row>
							<row>								
								<cell>olives</cell>
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
							</row>
							<row>								
								<cell>sausage</cell>
								<cell>sausage</cell>
								<cell>pepperoni</cell>
								<cell>pepperoni</cell>
							</row>
							<row>
								<cell>cheese</cell>
								<cell>bacon</cell>
								<cell>onions</cell>
								<cell>pepperoni</cell>
							</row>
							<row>								
								<cell>pineapple</cell>
								<cell>olives</cell>
								<cell>cheese</cell>
								<cell>bacon</cell>
							</row>
							<row>								
								<cell>green peppers</cell>
								<cell>bacon</cell>
								<cell>pepperoni</cell>
								<cell>olives</cell>
							</row>
						</tabular>
					</table>						
				</statement>
				<solution>
					<p>
						Without proper organization, this data is difficult to interpret. We need to simplify it to uncover trends and extract meaningful insights.
					</p>
				</solution>
			</example>
		</introduction>
		<subsubsection xml:id="subsubsec_graph_qualitative_frequency-table">
			<title>Frequency Tables</title>
			<p>
				The first step needed to graph qualitative data is is to first summarize it. To do so, we construct what a <term>frequency table</term>.
			</p>
			<definition xml:id="def_frequency-table">
				<idx>frequency table</idx>
				<statement>
					<p>
						A <term>frequency table</term> is a two-column table used to summarize the distribution of a qualitative (categorical) variable.
						<ul>
							<li>
								<p>
									The first column lists the distinct categories or values that the variable can take.
								</p>
							</li>
							<li>
								<p>
									The second column shows the frequency, or the number of times each category occurs in the dataset.
								</p>
							</li>
						</ul>
					</p>
				</statement>
			</definition>
			<p>
				To understand how this works, let's use a frequency table to summarize the pizza topping data from our first example.
			</p>
			<example xml:id="ex_graphs_frequency-table">
				<!-- <title>A Frequency Table</title> -->
				<statement>
					<p>
						Construct a frequency table for the pizza topping data seen in <xref ref="ex_graphs_organizing-data" text="custom">the example above</xref>. Does this table give you a better picture of the data set?
					</p>
				</statement>
				<solution>
					<sidebyside widths="55% 40%" margins="0%" valign="middle">
						<p>Steps:
							<ol>
								<li>
									<p>
										List all of the possible pizza toppings in the first column of our table.
									</p>
								</li>
								<li>
									<p>
										Count the frequency with which each topping appears in <xref ref="ex_graphs_organizing-data_table" text="custom">the original data</xref>.
									</p>
								</li>
								<li>
									<p>
										Check to ensure that the total of our counts adds up to the total number of values in the set of data.
									</p>
								</li>
							</ol>
							This definitely gives us a clearer picture of the data set. We can now see the number of times each topping was selected as somebody's favorite.
						</p>
						<table xml:id="ex_graphs_frequency-table_table">
							<title>Pizza toppings frequency table</title>
							<tabular>
								<col right="medium" halign="left"></col>
								<col halign="center"></col>
								<row bottom="medium">
									<cell>Topping</cell>
									<cell>Frequency</cell>
								</row>
								<row>
									<cell>Anchovies</cell>
									<cell>1</cell>
								</row>
								<row>
									<cell>Bacon</cell>
									<cell>10</cell>
								</row>
								<row>
									<cell>Cheese</cell>
									<cell>17</cell>
								</row>
								<row>
									<cell>Green Peppers</cell>
									<cell>11</cell>
								</row>
								<row>
									<cell>Mushrooms</cell>
									<cell>4</cell>
								</row>
								<row>
									<cell>Olives</cell>
									<cell>15</cell>
								</row>
								<row>
									<cell>Onions</cell>
									<cell>5</cell>
								</row>
								<row>
									<cell>Pepperoni</cell>
									<cell>17</cell>
								</row>
								<row>
									<cell>Pineapple</cell>
									<cell>6</cell>
								</row>
								<row bottom="medium">
									<cell>Sausage</cell>
									<cell>10</cell>
								</row>
								<row>
									<cell>Total:</cell>
									<cell>96</cell>
								</row>
							</tabular>
						</table>
					</sidebyside>
				</solution>
			</example>
			<p>
				While a frequency table is useful for summarizing data, it can be hard to gauge how popular categories are relative to each other. For instance, in the previous example, two more customers preferred cheese over olives<mdash/>but is that a significant difference? To better analyze this, we can convert counts into percentages.
			</p>
			<definition xml:id="def_relative-frequency-table">
				<!-- <title>Relative Frequency Table</title> -->
				<idx>relative frequency table</idx>
				<statement>
					<p>
						A <term>relative frequency table</term> is a table in which each category is listed together with the ratio of the total values from the data set that fall into that category.
					</p>
				</statement>
			</definition>
			<p>
				Let's revisit the pizza topping data once again, this time constructing a relative frequency table.
			</p>
			<example xml:id="ex_graphs_relative-frequency-table">
				<!-- <title>A Relative Frequency Table</title> -->
				<statement>
					<p>
						Construct a relative frequency table for the pizza topping data seen in <xref ref="ex_graphs_organizing-data"/>.
					</p>
				</statement>
				<solution>
					<sidebyside widths="50% 45%" margins="0%" valign="middle">
						<p>
							Steps:
							<ol>
								<li>
									<p>
										Start with the <xref ref="ex_graphs_frequency-table_table" text="custom">frequency table</xref> from the previous example.
									</p>
								</li>
								<li>
									<p>
										Divide each category frequency by the grand total (in this case 96).
									</p>
								</li>
								<li>
									<p>
										Check to ensure that the sum is 1. Note that in this case, the extra 0.0002 is a result of rounding error in our four-decimal-place answers.
									</p>
								</li>
							</ol>
							The relative frequency table allows for a clearer comparison between categories.
						</p>
						<table xml:id="ex_graphs_relative-frequency-table_table">
							<title>Pizza toppings relative frequency table</title>
							<tabular>
								<col halign="left" right="medium"></col>
								<col halign="center"></col>
								<row bottom="medium">
									<cell>Topping</cell>
									<cell>Relative Frequency</cell>
								</row>
								<row>
									<cell>Anchovies</cell>
									<cell><m>\frac{1}{96} \approx 0.0104</m></cell>
								</row>
								<row>
									<cell>Bacon</cell>
									<cell><m>\frac{10}{96} \approx 0.1042</m></cell>
								</row>
								<row>
									<cell>Cheese</cell>
									<cell><m>\frac{17}{96} \approx 0.1771</m></cell>
								</row>
								<row>
									<cell>Green Peppers</cell>
									<cell><m>\frac{11}{96} \approx 0.1146</m></cell>
								</row>
								<row>
									<cell>Mushrooms</cell>
									<cell><m>\frac{4}{96} \approx 0.0417</m></cell>
								</row>
								<row>
									<cell>Olives</cell>
									<cell><m>\frac{15}{96} \approx 0.1563</m></cell>
								</row>
								<row>
									<cell>Onions</cell>
									<cell><m>\frac{5}{96} \approx 0.0521</m></cell>
								</row>
								<row>
									<cell>Pepperoni</cell>
									<cell><m>\frac{17}{96} \approx 0.1771</m></cell>
								</row>
								<row>
									<cell>Pineapple</cell>
									<cell><m>\frac{6}{96} \approx 0.0625</m></cell>
								</row>
								<row bottom="medium">
									<cell>Sausage</cell>
									<cell><m>\frac{10}{96} \approx 0.1042</m></cell>
								</row>
								<row>
									<cell>Total:</cell>
									<cell><m>1.0002</m></cell>
								</row>
							</tabular>
						</table>
					</sidebyside>
				</solution>
			</example>
			<p>
				While these tables are a good step in better displaying our data, we still need to translate this into a	picture. We will discuss ways to do that in the next section.
			</p>			
		</subsubsection>
		<subsubsection xml:id="sec_graphs_qualitative_graphs">
			<title>Graphs</title>
			<p>
				One of the most basic ways to graphically represent data collected for a qualitative variable is by using a <term>bar graph</term>. First, create a frequency table. Once this is done, you can use computer software such as Microsoft Excel or Google Sheets to quickly construct a bar graph.
			</p>
			<definition xml:id="def_bar-graph">
				<title>Bar Graph</title>
				<idx>bar graph</idx>
				<idx><h>graphs</h><h>bar graph</h></idx>
				<statement>
					<p>
						A <term>bar graph</term> is a type of graph used to display qualitative data, where each category is represented by a separate bar. The height of each bar corresponds to the frequency or count of that category in the data set. The bars are separated by spaces to emphasize that the categories are distinct and can be arranged in any order.
					</p>
				</statement>
			</definition>
			<p>
				Note that you can also make a bar graph using a relative frequency table. This type of graph is technically called a <term>relative frequency bar graph</term>, but it looks just like a regular bar graph. The only difference is that the vertical scale represents percentages instead of raw frequencies.
			</p>
			<example xml:id="ex_graphs_bar-graph">
				<!-- <title>Constructing a Bar Graph</title> -->
				<statement>
					<p>
						Construct a bar graph for the pizza topping data seen in <xref ref="ex_graphs_organizing-data" />
					</p>
				</statement>
				<solution>
					<p>
						Based on the <xref ref="ex_graphs_frequency-table_table" text="custom">frequency table for this data</xref>, we get the following bar graph.
					</p>
					<figure xml:id="fig_graphs_ex_bar-graph">
						<caption>Pizza topping bar graph</caption>
						<image xml:id="image_graphs_ex_bar-graph" width="90%">
							<shortdescription>
								A bar for each pizza topping with heights corresponding to the to frequency of the topping in our frequency table.
						  </shortdescription>
						  <latex-image>
							\begin{tikzpicture}[font=\sffamily] % Apply \sffamily to the entire picture
							\begin{axis}[
									axis lines=left,
									no markers,
									xmin = 0.5, xmax=10.5,
									ymin=0, ymax=20,
									xtick={1,2,3,4,5,6,7,8,9,10},
									ytick={0,5,10,15,20},
									xticklabels={Anchovies,Bacon,Cheese,Pepper,Mushroom,Olive,Onion,Pepperoni,Pineapple,Sausage},
									ticklabel style={font=\normalsize\sffamily},
									xticklabel style={rotate=90},
									xlabel style={font=\sffamily, yshift=-0.5cm},
									xlabel={Pizza Topping},
									ylabel style={font=\sffamily},
									ylabel={Frequency},
									title={Favorite Pizza Toppings},
									title style={font=\large\sffamily\bfseries},
									enlargelimits=false,
									clip=false,
									grid = none,
									ymajorgrids=true,
									ybar=0pt,
									bar width=.5cm,
									width=12cm,
									height=8cm,
									axis line style={thick},
									tick style={thick},
							]
							\addplot[fill=cyan, draw=black] coordinates {
									(1,1)   % Anchovies
									(2,10)  % Bacon
									(3,17)  % Cheese
									(4,11)  % Pepper
									(5,4)   % Mushroom
									(6,15)  % Olive
									(7,5)   % Onion
									(8,17)  % Pepperoni
									(9,6)   % Pineapple
									(10,10) % Sausage
							};

							% Add value labels on top of bars
							\addplot[
									nodes near coords,
									nodes near coords style={font=\normalsize\sffamily, anchor=south},
									only marks,
									mark=none
							] coordinates {
									(1,1) (2,10) (3,17) (4,11) (5,4) (6,15) (7,5) (8,17) (9,6) (10,10)
							};

							\end{axis}
							\end{tikzpicture}
						  </latex-image>
						</image>
					</figure>
				</solution>
			</example>
			<p>
				Both bar graphs and relative frequency bar graphs are useful for comparing the number or percentage of values in one category with those in another. However, when the goal is to illustrate how each category contributes to the whole, a <term>pie graph</term> is often more useful. Pie graphs can be created using the same software we previously used to construct bar charts. As an example, let's revisit our pizza toppings scenario one more time.
			</p>
			<definition xml:id="def_pie-graph">
				<idx>pie graph</idx>
				<idx><h>graphs</h><h>pie graph</h></idx>
				<statement>
					<p>
						A <term>pie graph</term> is a type of graph used to represent qualitative data, where a circle is divided into sectors or wedges, each corresponding to a category. The area of each sector is proportional to the relative frequency of that category in the dataset.
					</p>
				</statement>
			</definition>
			<example xml:id="ex_graphs_pie-graph">
				<!-- <title>Constructing a Pie Graph</title> -->
				<statement>
					<p>Construct a pie graph for the pizza topping data seen in <xref ref="ex_graphs_organizing-data"/>.</p>
				</statement>
				<solution>
					<p>Based on the <xref ref="ex_graphs_relative-frequency-table_table" text="custom">relative frequency table</xref> previously constructed for this data, we get the following pie graph.</p>
					<figure xml:id="fig_graphs_ex_pie-graph">
						<caption>Pizza topping pie graph</caption>
						<image xml:id="image_graphs_ex_pie-graph"  width="80%">
							<shortdescription>
								A circle divided into ten sectors with sizes proportional to the relative frequency of the pizza toppings they represent.
							</shortdescription>
							<latex-image>
								% This code started as Jonathan Duncan's from Optima Statistics, but I ran it through AI to improve the colors, readability, and efficiency. I also made some style tweaks. 
								% Note: this code requires 
								\begin{tikzpicture}

										% Calculate cumulative angles and draw pie slices
										\def\startangle{90}
										\def\currentangle{\startangle}

										% Loop through data to draw pie slices with bright colors
										\foreach \percentage/\label/\color [count=\i] in {
												1/Anchovies/red,
												9/Bacon/orange,
												18/Cheese/yellow,
												12/Pepper/green!70!yellow,
												4/Mushroom/green,
												15/Olive/cyan,
												6/Onion/blue,
												18/Pepperoni/blue!70!magenta,
												6/Pineapple/magenta,
												11/Sausage/red!70!magenta} 
										{
												% Calculate end angle
												\pgfmathsetmacro{\endangle}{\currentangle - \percentage * 3.6}

												% Draw pie slice with bright colors
												\filldraw[fill=\color!70!white, draw=black, very thin]
														(0,0) -- (\currentangle:2) arc (\currentangle:\endangle:2) -- cycle;

												% Update current angle for next iteration
												\pgfmathsetmacro{\currentangle}{\endangle}
												\global\let\currentangle=\currentangle
										}

										% Establish precise coordinates for clean labeling (like first code)
										\coordinate (left border) at (4.25,0);
										\coordinate (right border) at (-4.25,0);
										\coordinate (l1) at (88.2:1.75);    % Anchovies
										\coordinate (l2) at (70.2:1.0);     % Bacon
										\coordinate (l3) at (15:1.3);       % Cheese
										\coordinate (l4) at (-32.5:1.2);    % Pepper
										\coordinate (l5) at (-61:1.5);      % Mushroom
										\coordinate (l6) at (-95.6:1.75);   % Olive
										\coordinate (l7) at (-133.4:1.5);   % Onion
										\coordinate (l8) at (-176.6:1.75);  % Pepperoni
										\coordinate (l9) at (-219.8:1.5);   % Pineapple
										\coordinate (l10) at (-250.3:1.75); % Sausage

										% Attach labels with clean positioning
										\begin{scope}[lab/.style={gray!80!white,thick,draw,font={\footnotesize\sffamily}},outer sep=-0.75mm]
											\fill[lab] (l1) circle(0.05) -- (l1-|left border) node[anchor=south east] {Anchovies (1\%)};
											\fill[lab] (l2) circle(0.05) -- (l2-|left border) node[anchor=south east] {Bacon (9\%)};
											\fill[lab] (l3) circle(0.05) -- (l3-|left border) node[anchor=south east] {Cheese (18\%)};
											\fill[lab] (l4) circle(0.05) -- (l4-|left border) node[anchor=south east] {Pepper (12\%)};
											\fill[lab] (l5) circle(0.05) -- (l5-|left border) node[anchor=south east] {Mushroom (4\%)};
											\fill[lab] (l6) circle(0.05) -- (l6-|right border) node[anchor=south west] {Olive (15\%)};
											\fill[lab] (l7) circle(0.05) -- (l7-|right border) node[anchor=south west] {Onion (6\%)};
											\fill[lab] (l8) circle(0.05) -- (l8-|right border) node[anchor=south west] {Pepperoni (18\%)};
											\fill[lab] (l9) circle(0.05) -- (l9-|right border) node[anchor=south west] {Pineapple (6\%)};
											\fill[lab] (l10) circle(0.05) -- (l10-|right border) node[anchor=south west] {Sausage (11\%)};
										\end{scope}

										% Enhanced title styling
										\node[font=\normalsize\sffamily\bfseries, color=black!80] at (0,2.8) {Favorite Pizza Toppings};

								\end{tikzpicture}
							</latex-image>
						</image>
					</figure>
					<p>Note that spreadsheet programs often convert relative frequencies into percents when constructing a pie graph.</p>
				</solution>
			</example>
		</subsubsection>
	</subsection>
</section>