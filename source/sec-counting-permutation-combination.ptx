<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-set-permutation-combination" xmlns:xi="http://www.w3.org/2001/XInclude">
	<title>Permutations and Combinations</title>

	<objectives>
		<ul>
			<li>
				<p>
					Use Permutations to solve counting problems.
				</p>
			</li>
			<li>
				<p>
					Use Permutations to solve counting problems.
				</p>
			</li>
		</ul>
	</objectives>

	<introduction>
		<p>
			In this section, we build on the multiplication principle discussed in the previous section. We start with factorials, which establish the mathematical foundation for the second topic: permutations. Permutations are in turn the building blocks of combinations.
		</p>
	</introduction>
	<subsection xml:id="subsec-counting-factorial">
		<title>Factorials</title>
		<p>
			The following example shows how the <term>factorial</term> is a special case of the <xref ref="thm_counting-rule_multiplication" text="custom"> multiplication principle</xref>.
		</p>
		<example xml:id="ex_counting_factorial_dolls">
			<title>Arranging Items</title>
			<statement>
				<p>
					You want to display your four favorite collectibles on your shelf: a Minecraft Steve figure, a Pikachu plush, a Lego Harry Potter minifigure, and a Mario Kart Hot Wheels car. In how many different ways can you arrange them in a row?
				</p>
			</statement>
			<solution>
				<p>This is an example of the multiplication rule using the following steps.
					<ol>
						<li><p>Choose which of the 4 items to place first (4 choices)</p></li>
						<li><p>Choose which of the 3 remaining items to place 2nd (3 choices)</p></li>
						<li><p>Choose which of the 2 remaining items to place 3rd (2 choices left)</p></li>
						<li><p>Choose which of the 1 remaining items to place at the end of the row (only one choice).</p></li>
					</ol>
					Therefore, according to the multiplication rule, the number of orderings is:
					<me> 4\times 3\times 2 \times 1 = 24</me>.
				</p>
			</solution>
		</example>
		<p>
			Notice that because we were selecting from our group of items without replacing them, the number of choices went down by one each time. When we use the multiplication rule with this sort of process, we wind up multiplying the numbers between 1 and the original number of choices. This product has a special name.
		</p>
		<definition xml:id="def_factorial">
			<idx>factorial</idx>
			<statement>
				<p>
					For any positive integer <m>n</m>, <m>n!</m> (read <q><m>n</m> <em>factorial</em></q>) is the product of the numbers between <m>1</m> and <m>n</m>. That is:
					<me>
						n! = n\times(n-1)\times \cdots \times 2\times 1
					</me>.
					Also, by definition, 
					<me>
						0! = 1.
					</me>
				</p>
			</statement>
		</definition>
		<p>
			In the next example we practice computing factorials. Note how quickly the value of a factorial grows as <m>n</m> grows. Also, notice that when dividing factorials, canceling is a very useful tool.
		</p>
		<example xml:id="ex_counting_factorial_compute">
			<title>Computing Factorials</title>
			<statement>
				<p>
					Find the value of each expression below.
					<ol marker="a." cols="3">
						<li><p><m>5!</m></p></li>
						<li><p><m>8!</m></p></li>
						<li><p><m>\frac{8!}{5!}</m></p></li>
					</ol>
				</p>
			</statement>
			<solution>
				<p>
					Using the definition above,
					<ol marker="a.">
						<li><p><m>5! = 5\times 4\times 3\times 2\times 1 = 120</m></p></li>
						<li><p><m>8! = 8\times 7\times 6\times 5! = 336\times 120 = 40320</m></p></li>
						<li><p><m>\frac{8!}{5!} = \frac{8\times 7\times 6\times 5!}{5!} = \frac{8\times 7\times 6}{1} = 336</m>.</p></li>
					</ol>
				</p>
			</solution>
		</example>
		<example>
			<statement>
				<p>
					Six WWU students line up for a photo that will appear in the local paper. The photographer arranges them in a line down the steps of Meske Hall. How many different ways can the student be arranged?
				</p>
			</statement>
			<solution>
				<p>
					Because each student can only be placed in one position, the number of students decreases with each choice. That is, 6 students can be on the top step, but then only 5 remain to be selected for the second step, 4 for the third step, and so on. Thus, there are
					<me>
						6! = 6\times 5\times 4\times 3\times 2\times 1 = 720
					</me>
					possible arrangements.
				</p>
			</solution>
		</example>
	</subsection>
	<subsection xml:id="subsec_counting_permutations">
		<title>Permutations</title>
		<p>
			In some counting problems, the process resembles the one used in factorial-based problems, but we are not required to use or arrange all of the items. Here is an example.
		</p>
		<example xml:id="ex_counting_permutation_runners">
			<title>Ordering a Subset</title>
			<statement>
				<p>
					Suppose that ten runners compete in a race in which first, second, and third prizes are awarded. In how many ways can these prizes be won?
				</p>
			</statement>
			<solution>
				<p>
					Using the multiplication rule, the steps in this process are:
					<ol>
						<li><p>Award first prize. Any of the 10 runners could be 1st.</p></li>
						<li><p>Award second prize. Nine runners could come in 2nd.</p></li>
						<li><p>Award third prize. Eight runners could come in 3rd.</p></li>
					</ol>
					Thus, prizes can be awarded
					<me>10\times 9\times 8 = 720</me>
					ways.
				</p>
			</solution>
		</example>
		<p>
			While the solution to the above problem started off looking like a factorial, <m>10 \times 9 \times 8</m>, it stopped after 8 because we didn't need to order the remaining seven runners in this race. In general, when we need to count the number of ways to order or arrange <m>r</m> items chosen from <m>n</m> possible items, we are using a <term>permutation</term>.
		</p>
		<definition xml:id="def-permutation-in-words">
			<statement>
				<p>
					A <term>permutation</term> of a set of elements is an ordered arrangement where each element is used once. 
				</p>
			</statement>
		</definition>
		<fact xml:id="fact-permutation-formula">
			<idx>permutation</idx>
			<idx><h>counting rules</h><h>permutation</h></idx>
			<statement>
				<p>
					A <term>permutation of n items taken r at a time</term> is used to count the number of ways to arrange (or permute) <m>r</m> items chosen from <m>n</m> possible items. The formula for this permutation is:
					<me>
						P(n,r) = \frac{n!}{(n-r)!}
					</me>.
			</p>
			<p>
				<alert>Note:</alert> Scientific calculators have built-in permutation functions. If you're unsure how to use yours or whether to use it instead of the formula above, ask your instructor for guidance.
			</p>
			</statement>
		</fact>
		<p>
			Applying this formula to the foot-race example above, we could have computed:
			<me>
				P(10,3) = \frac{10!}{(10-3)!} = \frac{10\times 9\times 8\times 7!}{7!} = 10\times 9\times 8 = 720
			</me>.
			Permutations are a general method used to count the number of ways to complete a process when the order of completion matters. A race is a good example of a situation where order is important. Another example is provided below.
		</p>
		<example xml:id="ex_counting_permutation_bands">
			<title>Using Permutations</title>
			<statement>
				<p>
					Six bands have expressed interest in performing at a concert, which has three time slots for performances. In how many different ways can the concert manager schedule the performances?
				</p>
			</statement>
			<solution>
				<p>
					Since there are 6 bands to choose from and only 3 are needed, and because the order of performance matters (changing the order creates a different schedule), the number of possible schedules is:
					<me>
						P(6,3) = \frac{6!}{3!} = 6\times 5\times 4 = 120
					</me>.
				</p>
			</solution>
		</example>
		<p>
			There are a few general results that hold regardless of the value of <m>n</m> in a permutation. Three of these are shown below.
		<ul>
			<li><p><m>P(n,n) = \frac{n!}{(n-n)!} = \frac{n!}{0!} = n!</m></p></li>
			<li><p><m>P(n,0) = \frac{n!}{(n-0)!} = \frac{n!}{n!} = 1</m></p></li>
			<li><p><m>P(n,1) = \frac{n!}{(n-1)!} = \frac{n\times (n-1)!}{(n-1)!} = n</m></p></li>
		</ul>
		Additionally, the formula shown in <xref ref="fact-permutation-formula"/> algebraically reduces to the following form,
		<me>
			P(n,r) = \underbrace{n\times (n-1) \times \cdots \times (n-r+1)}_{r \text { items}}
		</me>,
		which looks like the multiplication rule.  You may find this easier to use than the version written with factorials.
		</p>
	</subsection>
	<subsection xml:id="subsec_counting_combinations">
		<title>Combinations</title>
		<p>
			Permutations are useful when the order in which we select objects matters<mdash/>as in running a race or creating a schedule. However, order does not always matter. In such cases, we need to change the way we count. This important distinction is illustrated in the following example.
		</p>
		<example xml:id="ex_counting_combination_movies">
			<title>Counting when Order Doesn't Matter</title>
			<statement>
				<p>
					You have two extra movie tickets and want to invite two of your four good friends to join you. In how many different ways can you choose which friends to take to the movies?
				</p>
			</statement>
			<solution>
				<p>
					Suppose your friends' names are: Alice, Bob, Candace, and David. If you try to count the number of ways you could invite two friends using a permutation, you get:
					<me>
						P(4,2) = 4\times 3 = 12
					</me>.
					However, this is not the correct answer. To see why, make a list of possible choices that the permutation counts.
				</p>
				<table>
					<title>Possible selections.</title>
					<tabular>
						<row>
							<cell>AB</cell>
							<cell>BA</cell>
							<cell>CA</cell>
							<cell>DA</cell>
						</row>
						<row>
							<cell>AC</cell>
							<cell>BC</cell>
							<cell>CB</cell>
							<cell>DB</cell>
						</row>
						<row>
							<cell>AD</cell>
							<cell>BD</cell>
							<cell>CD</cell>
							<cell>DC</cell>
						</row>
					</tabular>
				</table>
				<p>
					Notice that each pair appears twice. For example, AB and BA are counted separately but these two pairs represent inviting the same group of friends to a movie. This is because in a permutation, the order in which we hand out the tickets makes a difference. 
					But really, we don't care who got the first ticket; we just want to know who is going. Since there are two of each possible pairs, the actual number of ways to pick the two friends to go with us is:
					<me>
						\frac{P(4,2)}{P(2,2)} = \frac{12}{2} = 6
					</me>.
					The <m>P(2,2)</m> in the denominator is the number of orderings of 2 objects, which needs to be divided out of the permutation because order doesn't matter here.
				</p>
			</solution>
		</example>
		<p>
			In the example above, we arrived at the final solution using two steps. First, we counted the number of ways to pick the friends to go with us if the order did matter, in this case it was 12. Then we counted the number of ways that those two friends could be arranged, which was 2. 
			Finally, we divide the 12 ordered ways by the 2 different orderings to get a total of 6 ways to choose our two friends if the order does not matter. This process can be combined into a single counting rule called a combination.
		</p>
		<fact xml:id="fact_counting-rule_combination">
			<idx>combination</idx>
			<idx><h>counting rules</h><h>combination</h></idx>
			<statement>
				<p>
					A <term>combination of n items taken r at a time </term> is used to count the number of ways to choose <m>r</m> items from <m>n</m> possible items if the order in which we select them does not matter. The formula for this combination is:
					<me>C(n,r) = \frac{P(n,r)}{r!} = \frac{n!}{r!(n-r)!}</me>.
				</p>
				<p>
					<alert>Note:</alert> Scientific calculators also have built-in combination functions. Ask your instructor for help finding this if appropriate.
				</p>
			</statement>
		</fact>
			<p>
				Applying this formula to the movie ticket example, we get:
				<me>
					C(4,2) = \frac{4!}{2!(4-2)!} = \frac{4\times 3\times 2!}{2!\times 2!} = \frac{4\times 3}{2\times 1} = 6
				</me>.
			</p>
		<example xml:id="ex_counting_combination_committee">
			<title>Using a Combination</title>
			<statement>
				<p>
					A committee of 10 business executives wishes to form a subcommittee of 3 members to research a strategic initiative. In how many ways can this subcommittee be selected?
				</p>
			</statement>
			<solution>
				<p>
					The order in which a subcommittee is selected does not matter<mdash/>a person is either on the committee or not on the committee. Therefore, this is a combination and the solution is:
					<me>
						C(10,3) = \frac{10!}{3!(10-3)!} = \frac{10\times 9\times 8 \times 7!}{3!\times 7!} = \frac{10\times 9\times 8}{3\times 2\times 1} = 120
					</me>.
				</p>
			</solution>
		</example>
		<p>
			As with permutations, there are a few general rules that combinations follow no matter what the value of <m>n</m> is. Several of these rules are shown below.
		  <ul>
		  	<li><p><m>C(n,n) = 1</m></p></li>
		  	<li><p><m>C(n,1) = n</m></p></li>
		  	<li><p><m>C(n,r) = C(n,n-r)</m></p></li>
		  </ul>
			The definition of the combination shown above simplifies to a form you may find easier to use: 
		 	<me> 
				C(n,r) = \frac{\overbrace{n\times (n-1) \times \cdots \times (n-r+1)}^{r \text{ values}}}{r!}
			</me>.
		</p>
	</subsection>
	<subsection xml:id="sec_counting_mixed">
	<title>Mixed Counting Techniques</title>
		<p>
			One of the most challenging aspects of counting problems is deciding which rules<mdash/>or combinations of rules<mdash/>to apply to a given question. To complicate things further, there are often multiple approaches to reach the correct answer. Here are a few general rules of thumb to keep in mind.
		</p>
		<assemblage xml:id="assemblage-counting-rules_principles">
			<title>Combining Counting Rules</title>
			<idx><h>counting rules</h><h>combining</h></idx>
				<p>
					<ol>
						<li><p>If the things you are counting come in two distinct groups, count each group, then add together the results. (<xref ref="thm_counting-rule_addition-informal" text="custom">addition rule</xref> <mdash/> goes with <q>or</q>)</p></li>
						<li><p>If there is overlap between the two groups, remember to subtract the intersection. (<xref ref="fact-sets-inclusion-exclusion-rule" text="custom">inclusion/exclusion rule</xref>)</p></li>
						<li><p>If the process you are counting can be broken down into steps, count the number of ways each step can be performed and multiply. (<xref ref="thm_counting-rule_multiplication" text="custom">multiplication rule</xref> <mdash/> goes with <q>and</q>)</p></li>
						<li><p>If you are arranging things or selecting multiple items and the order of selection matters, use a permutation. (<xref ref="fact-permutation-formula">permutation rule</xref>).</p></li>
						<li><p>If you are selecting multiple items from a group of items and the order in which you pick them does not matter, use a combination. (<xref ref="fact_counting-rule_combination" text="custom">combination rule</xref>).</p></li>
					</ol>
				</p>
		</assemblage>
		<p>
			The following examples illustrate these principles. Remember that the first step should always be to identify the rule or rules that should be used to solve a counting problem.
		</p>
		<example xml:id="ex_counting_mixed_permutation">
			<title>Picking a Counting Rule</title>
			<statement>
				<p>The front row of Professor Jackson's classroom has only 4 seats, and there are 8 students who wish to sit in them. In how many ways can the seats be assigned?</p>
			</statement>
			<solution>
				<p>In a seating chart, the order would matter. Therefore, this must a permutation, and the solution is:
					<me>
						P(8,4) = 8\times 7\times 6\times 5 = 1680
					</me>.
				</p>
			</solution>
		</example>
		<example xml:id="ex_counting_mixed_two-combinations">
			<title>Combining Counting Rules</title>
			<statement>
				<p>
					A committee consists of 6 men and 3 women. Four members of the committee are to be selected for a fact-finding trip. In how many ways can the selection be made if exactly three men and one woman are to be chosen?
				</p>
			</statement>
			<solution>
				<p>
						The order in which we pick members of a committee to go on a trip does not matter<mdash/>a member either goes on the trip or does not. However, notice that we have two steps to this problem.
					<ol>
						<li><p>Pick the three men to go on the trip.</p></li>
						<li><p>Pick the one woman to go on the trip.</p></li>
					</ol>
					The number of ways to pick the three men from the 6 male committee members is:
					<me>
						C(6,3) = \frac{6\times 5\times 4}{3\times 2\times 1} = 20
					</me>.
					The number of ways to pick the one woman is:
					<me>
						C(3,1) = 3
					</me>.
					Therefore, by applying the multiplication rule, the total number of ways to select the four people for the trip is:
					<me>
						C(6,3)\times C(3,1) = 20\times 3 = 60
					</me>.
				</p>
			</solution>
		</example>
		<example xml:id="ex_sets-counting_mixed_permutation-2">
			<title>Counting by Combining Objects</title>
			<statement>
				<p>
					Trains arrive at a station in random order from Berlin, Munich, Salzberg, Vienna, and Hamburg. In how many ways can the trains arrive so that the train from Berlin arrives immediately after the train from Salzberg?
				</p>
			</statement>
			<solution>
				<p>
					This problem specifically mentions the order of the trains, so the order will matter. However, we are not asked in how many ways the trains can arrive in general, which would be 
					<me>
						P(5,5) = 5!
					</me>.
					Instead, we specify that the Berlin and Salzberg train must arrive one after the other. Symbolically, we want to arrange the following four trains in order: BS, M, V, H. BS is listed together because of the condition mentioned above. We can order these in 
					<me>
						P(4,4) = 4! = 24
					</me> 
					ways.
				</p>
			</solution>
		</example>
		<example xml:id="ex_counting_mixed_at-least">
			<title>Counting Cases with <q>At Least</q></title>
			<statement>
				<p>
					A deli sells 6 types of salads, 8 types of sandwiches, and 3 types of chips. Picnic baskets are available for purchase and must contain 4 different items selected from these 17. How many different picnic baskets can be made that include at least two different sandwiches?
				</p>
			</statement>
			<solution>
				<p>
					This is actually the most challenging problem in this section. The reason is that we have to use both the multiplication rule to split the process into steps and the addition rule to split the process into cases. Here's how we do it:
					<ul>
						<li><title>Case 1</title><p>Pick two sandwiches from 8 sandwiches and 2 from the remaining 9 items
						  <me>C(8,2)\times C(9,2) = \frac{8\times 7}{2\times 1}\times\frac{9\times 8}{2\times 1} = 1008</me>.</p></li>
						<li><title>Case 2</title><p>Pick three sandwiches from 8 available and 1 item from remaining 9
						  <me>C(8,3)\times C(9,1) = \frac{8\times 7\times 6}{3\times 2\times 1} \times 9 = 504</me>.</p></li>
						<li><title>Case 3</title><p>Pick four sandwiches from 8 available and none of the remaining 9 items
						  <me>C(8,4)\times C(9,0) = \frac{8\times 7\times 6\times 5}{4\times 3\times 2\times 1}\times 1 = 70</me>.</p></li>
					</ul>
					Note that these three cases are mutually exclusive based on the number of sandwiches chosen, and that a picnic basket with at least two sandwiches would fall into one of these cases. So using the addition rule, the total number of picnic baskets is:
					<me>
						1008 + 504 + 70 = 1582
					</me>.
				</p>
				</solution>
		</example>
	</subsection>
</section>